<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>Hello My Love üíñ</title>

<link href="https://fonts.googleapis.com/css2?family=Comic+Neue:wght@700&display=swap" rel="stylesheet">

<style>
*{box-sizing:border-box}
html,body{
  margin:0;
  padding:0;
  font-family:'Comic Neue',cursive;
  overflow-x:hidden;
  background:#000;
}

body{
  overscroll-behavior:none;
}

/* ===== PARALLAX BACKGROUND ===== */
.parallax{
  position:fixed;
  inset:0;
  background:
    radial-gradient(circle at 20% 20%, #ffd6e8, transparent 40%),
    radial-gradient(circle at 80% 30%, #ffb3d9, transparent 40%),
    radial-gradient(circle at 50% 80%, #ffcce0, transparent 45%);
  background-size:200% 200%;
  animation:moveBg 20s infinite alternate;
  z-index:-1;
}
@keyframes moveBg{
  from{background-position:0% 0%}
  to{background-position:100% 100%}
}

/* ===== CARD ===== */
.card{
  max-width:360px;
  margin:60px auto;
  background:white;
  border-radius:24px;
  padding:24px;
  box-shadow:0 20px 40px rgba(0,0,0,.2);
  text-align:center;
  animation:fadeIn .8s ease;
}
@keyframes fadeIn{
  from{opacity:0;transform:translateY(20px)}
  to{opacity:1;transform:none}
}

.hidden{display:none}

button{
  border:none;
  padding:12px 24px;
  border-radius:999px;
  font-size:16px;
  cursor:pointer;
}
.primary{background:#ff7aa8;color:white}
.outline{background:none;border:2px solid #ff7aa8;color:#ff7aa8}

.musicBtn{
  position:fixed;
  bottom:20px;
  right:20px;
  width:56px;
  height:56px;
  border-radius:50%;
  background:#ff7aa8;
  color:white;
  font-size:22px;
}

/* ===== PUZZLE ===== */
.puzzle{
  display:grid;
  grid-template-columns:repeat(3,1fr);
  gap:6px;
  margin-top:16px;
}
.puzzle img{
  width:100%;
  border-radius:12px;
  cursor:grab;
  touch-action:none;
  transition:transform .2s;
}
.puzzle img:active{cursor:grabbing;transform:scale(.95)}

.confetti{
  position:fixed;
  inset:0;
  pointer-events:none;
  z-index:10;
}

/* ===== ENDING ===== */
.fadeBlack{
  position:fixed;
  inset:0;
  background:black;
  animation:fadeBlack 3s forwards;
  z-index:20;
}
@keyframes fadeBlack{
  from{opacity:0}
  to{opacity:1}
}
</style>
</head>

<body>
<div class="parallax"></div>

<audio id="music" src="lagu-lagi.mp3" loop></audio>

<button class="musicBtn" onclick="toggleMusic()">üéµ</button>

<!-- STEP 1 -->
<div class="card" id="step1">
  <h2>Hello My Love üíñ</h2>
  <p>Do you want to see your gift?</p>
  <button class="primary" onclick="go(2)">YES PLEASE</button><br><br>
  <button class="outline" onclick="alert('Ayoo jangan gitu üò≠')">NO THANKS</button>
</div>

<!-- STEP 2 -->
<div class="card hidden" id="step2">
  <h2>üîê Secret Code</h2>
  <p>Clue 6 angka:<br>Tanggal/Bulan/Tahun</p>
  <input id="code" placeholder="contoh: 250825" style="padding:10px;width:100%;border-radius:12px;border:1px solid #ccc">
  <br><br>
  <button class="primary" onclick="checkCode()">Masuk üíó</button>
</div>

<!-- STEP 3 PUZZLE -->
<div class="card hidden" id="step3">
  <h2>üß© Puzzle Time</h2>
  <p>Geser potongan fotonya üíã</p>
  <div class="puzzle" id="puzzle"></div>
</div>

<!-- STEP 4 LETTER -->
<div class="card hidden" id="step4">
  <h2>I Love You üíñ</h2>
  <p id="letter"></p>
  <button class="primary" onclick="showEnding()">Will you stay with me?</button>
</div>

<!-- ENDING -->
<div class="card hidden" id="ending">
  <h2>üíñ She Said YES!</h2>
  <p>Hari ini, besok, dan seterusnya ü§ç</p>
  <button class="primary" onclick="finalScene()">Peluk Aku ü§ç</button>
</div>

<script>
/* ===== NAV ===== */
function go(n){
  document.querySelectorAll('.card').forEach(c=>c.classList.add('hidden'));
  document.getElementById('step'+n).classList.remove('hidden');
}

/* ===== MUSIC ===== */
const music=document.getElementById('music');
function toggleMusic(){
  music.paused?music.play():music.pause();
}

/* ===== PASSWORD ===== */
function checkCode(){
  if(code.value==="250825"){
    music.volume=1;
    music.play();
    go(3);
    loadPuzzle();
  }else alert("Clue-nya inget dong üòÜ");
}

/* ===== PUZZLE ===== */
const images=[
"foto1.jpeg","foto2.jpeg","foto3.jpeg",
"foto4.jpeg","foto5.jpeg","foto6.jpeg",
"foto7.jpeg","foto8.jpeg","foto9.jpeg"
];
let order=[],drag=null;

function loadPuzzle(){
  const grid=document.getElementById('puzzle');
  grid.innerHTML="";
  order=images.slice().sort(()=>Math.random()-0.5);

  order.forEach((src,i)=>{
    const img=document.createElement('img');
    img.src=src;
    img.draggable=true;

    img.ondragstart=()=>drag=i;
    img.ondragover=e=>e.preventDefault();
    img.ondrop=e=>{
      e.preventDefault();
      [order[drag],order[i]]=[order[i],order[drag]];
      render();
      checkWin();
    };
    grid.appendChild(img);
  });
  render();
}
function render(){
  document.querySelectorAll('.puzzle img').forEach((img,i)=>img.src=order[i]);
}
function checkWin(){
  if(order.join()==images.join()){
    setTimeout(()=>go(4),600);
    typeLetter();
  }
}

/* ===== LETTER ===== */
const text="Terima kasih sudah hadir dan bertahan bersamaku. Aku harap kita selalu saling memilih, di setiap hari yang datang üíó";
let i=0;
function typeLetter(){
  const el=document.getElementById('letter');
  el.innerHTML="";
  i=0;
  const t=setInterval(()=>{
    el.innerHTML+=text[i++];
    if(i>=text.length)clearInterval(t);
  },40);
}

/* ===== ENDING ===== */
function showEnding(){go('ending')}
function finalScene(){
  let v=music.volume;
  const fade=setInterval(()=>{
    v-=0.02;
    music.volume=Math.max(v,0);
    if(v<=0){music.pause();clearInterval(fade);}
  },100);
  document.body.innerHTML+='<div class="fadeBlack"></div>';
}
</script>
</body>
</html>
