<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Special Gift For You</title>
    <link href="https://fonts.googleapis.com/css2?family=Dancing+Script:wght@700&family=Poppins:wght@300;400;600&display=swap" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.5.1/dist/confetti.browser.min.js"></script>
    
    <style>
        :root {
            --primary: #ff8fa3;
            --secondary: #c9184a;
            --bg-glass: rgba(255, 255, 255, 0.3);
            --shadow: 0 8px 32px 0 rgba(31, 38, 135, 0.37);
        }

        * { margin: 0; padding: 0; box-sizing: border-box; }

        body {
            font-family: 'Poppins', sans-serif;
            overflow: hidden;
            height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            background: linear-gradient(-45deg, #ee7752, #e73c7e, #23a6d5, #23d5ab, #ffafbd);
            background-size: 400% 400%;
            animation: gradientBG 15s ease infinite;
        }

        @keyframes gradientBG {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }

        .container {
            background: var(--bg-glass);
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
            border-radius: 20px;
            border: 1px solid rgba(255, 255, 255, 0.18);
            padding: 30px;
            width: 90%;
            max-width: 450px;
            text-align: center;
            box-shadow: var(--shadow);
            color: #fff;
            position: relative;
        }

        h1, h2 { font-family: 'Dancing Script', cursive; margin-bottom: 15px; text-shadow: 2px 2px 4px rgba(0,0,0,0.2); }
        h1 { font-size: 2.2rem; }
        p { margin-bottom: 20px; font-size: 0.9rem; }

        .page { display: none; animation: fadeIn 0.8s ease; }
        .page.active { display: block; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(20px); } to { opacity: 1; transform: translateY(0); } }

        input {
            padding: 12px; border-radius: 50px; border: none; outline: none; text-align: center;
            width: 80%; margin-bottom: 20px; background: rgba(255,255,255,0.8); color: #333;
        }

        .btn {
            background: var(--secondary); color: white; padding: 10px 25px; border-radius: 50px;
            border: none; cursor: pointer; font-weight: 600; transition: transform 0.2s;
            box-shadow: 0 4px 15px rgba(0,0,0,0.2);
        }
        .btn:hover { transform: scale(1.05); background: #a00f38; }

        /* PUZZLE STYLE */
        #puzzle-board {
            width: 300px; height: 300px; margin: 0 auto 20px auto;
            display: grid; grid-template-columns: repeat(3, 1fr); grid-template-rows: repeat(3, 1fr);
            gap: 2px; background: rgba(255,255,255,0.2); padding: 5px; border-radius: 10px;
        }
        .puzzle-piece {
            background-image: url('foto1.jpeg'); /* FOTO PUZZLE */
            background-size: 300px 300px; cursor: grab; border-radius: 5px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.2); transition: transform 0.2s;
        }
        .puzzle-piece.selected { border: 2px solid #fff; transform: scale(0.95); opacity: 0.8; }

        /* GALLERY STYLE */
        .gallery { display: flex; overflow-x: auto; scroll-snap-type: x mandatory; gap: 10px; padding-bottom: 10px; scrollbar-width: none; }
        .gallery::-webkit-scrollbar { display: none; }
        .photo-card { flex: 0 0 100%; scroll-snap-align: center; border-radius: 15px; overflow: hidden; }
        .photo-card img { width: 100%; height: 300px; object-fit: cover; }

        .buttons-container { display: flex; justify-content: center; gap: 15px; margin-top: 20px; position: relative; height: 50px; }
        
        /* TIMER STYLE */
        #love-timer {
            font-size: 1rem; margin: 20px auto; background: rgba(255,255,255,0.2);
            padding: 15px; border-radius: 15px; width: 100%;
        }
    </style>
</head>
<body>

    <audio id="musik" loop><source src="lagu-lagi.mp3" type="audio/mpeg"></audio>

    <div class="container">
        <div id="page1" class="page active">
            <h1>Hi, This is a gift for you ‚ù§Ô∏è</h1>
            <p>Ada sesuatu spesial yang ingin aku tunjukkan.</p>
            <button class="btn" onclick="nextPage('page2')">Buka Kado üéÅ</button>
        </div>

        <div id="page2" class="page">
            <h2>Masukkan Kode Rahasia</h2>
            <p>Clue: 250825</p>
            <input type="password" id="passcode" placeholder="Kode...">
            <br>
            <button class="btn" onclick="checkCode()">Unlock üîì</button>
        </div>

        <div id="page3" class="page">
            <h2>Puzzle Time! üß©</h2>
            <p>Susun foto ini ya! <small>(Drag atau Klik 2 kotak untuk tukar)</small></p>
            <div id="puzzle-board"></div>
            <p id="puzzle-status" style="margin-top:10px; font-weight:bold; color:#ffeeb0;"></p>
        </div>

        <div id="page4" class="page">
            <h2>For You, My Dear</h2>
            <div id="typing-box" style="text-align: left; min-height: 120px; font-size: 0.9rem; margin-bottom:15px;"></div>
            <button class="btn" onclick="nextPage('page5')">Lihat Kenangan üì∏</button>
        </div>

        <div id="page5" class="page">
            <h2>Our Memories</h2>
            <div class="gallery">
                <div class="photo-card"><img src="foto1.jpeg" alt="1"></div>
                <div class="photo-card"><img src="foto2.jpeg" alt="2"></div>
                <div class="photo-card"><img src="foto3.jpeg" alt="3"></div>
                <div class="photo-card"><img src="foto4.jpeg" alt="4"></div>
                <div class="photo-card"><img src="foto5.jpeg" alt="5"></div>
                <div class="photo-card"><img src="foto6.jpeg" alt="6"></div>
                <div class="photo-card"><img src="foto7.jpeg" alt="7"></div>
                <div class="photo-card"><img src="foto8.jpeg" alt="8"></div>
                <div class="photo-card"><img src="foto9.jpeg" alt="9"></div>
                <div class="photo-card"><img src="foto10.jpeg" alt="10"></div>
                <div class="photo-card"><img src="foto11.jpeg" alt="11"></div>
            </div>
            <br><button class="btn" onclick="nextPage('page6')">Next ‚ù§Ô∏è</button>
        </div>

        <div id="page6" class="page">
            <h2>Will You Stay With Me?</h2>
            <div class="buttons-container">
                <button class="btn" onclick="terimaCinta()">YES, I WILL! üíñ</button>
                <button class="btn" id="btnNo" onmouseover="pindahTombol()" style="position: absolute;">NO ‚òπÔ∏è</button>
            </div>
        </div>

        <div id="page7" class="page">
            <h1>Yeay! Makasih Sayang! üéâ</h1>
            <p>Aku beruntung banget punya kamu.</p>
            
            <div id="love-timer">
                Kita sudah bersama selama:<br>
                <b id="timer-display" style="font-size: 1.2rem;">Hitung waktu...</b>
                <br>‚ù§Ô∏è
            </div>

            <button class="btn" onclick="pelukAku()">Peluk Aku ü§ó</button>
        </div>
    </div>

    <script>
        const secretCode = "250825";
        const textToType = "Hai kamu... Makasih ya udah jadi bagian terbaik dalam hidupku. Semoga kita bisa terus sama-sama ya. Love you! ‚ù§Ô∏è";
        
        // --- SET TANGGAL JADIAN DISINI (Format: YYYY-MM-DD) ---
        // Saya set ke 25 Agustus 2025 sesuai kode kamu "250825"
        const startDate = new Date("2025-08-25"); 
        
        let audio = document.getElementById("musik");
        const puzzleBoard = document.getElementById('puzzle-board');
        let pieces = [], selectedPiece = null;

        function nextPage(id) {
            document.querySelectorAll('.page').forEach(p => p.classList.remove('active'));
            document.getElementById(id).classList.add('active');
            if(id === 'page3') initPuzzle();
            if(id === 'page4') typeWriter();
            if(id === 'page7') startTimer(); // Mulai timer di halaman akhir
        }

        function checkCode() {
            if(document.getElementById('passcode').value === secretCode) {
                audio.play(); nextPage('page3');
            } else { alert("Kode Salah!"); }
        }

        // --- PUZZLE LOGIC ---
        function initPuzzle() {
            puzzleBoard.innerHTML = ""; pieces = [];
            let indices = [0, 1, 2, 3, 4, 5, 6, 7, 8].sort(() => Math.random() - 0.5);
            indices.forEach((index) => {
                const piece = document.createElement('div');
                piece.classList.add('puzzle-piece');
                piece.draggable = true;
                let row = Math.floor(index / 3), col = index % 3;
                piece.style.backgroundPosition = `${col * 50}% ${row * 50}%`;
                piece.dataset.id = index;
                piece.addEventListener('dragstart', dragStart);
                piece.addEventListener('dragover', e => e.preventDefault());
                piece.addEventListener('drop', dragDrop);
                piece.addEventListener('click', () => clickSwap(piece));
                puzzleBoard.appendChild(piece); pieces.push(piece);
            });
        }
        let dragSrcEl = null;
        function dragStart(e) { dragSrcEl = this; }
        function dragDrop(e) { if(dragSrcEl !== this) swapPieces(dragSrcEl, this); }
        function clickSwap(p) {
            if(!selectedPiece) { selectedPiece = p; p.classList.add('selected'); }
            else { swapPieces(selectedPiece, p); selectedPiece.classList.remove('selected'); selectedPiece = null; }
        }
        function swapPieces(el1, el2) {
            let tempBg = el1.style.backgroundPosition, tempId = el1.dataset.id;
            el1.style.backgroundPosition = el2.style.backgroundPosition; el1.dataset.id = el2.dataset.id;
            el2.style.backgroundPosition = tempBg; el2.dataset.id = tempId;
            checkWin();
        }
        function checkWin() {
            if(Array.from(puzzleBoard.children).every((p, i) => p.dataset.id == i)) {
                document.getElementById('puzzle-status').innerText = "Yeay! Sempurna! üéâ";
                triggerConfetti(); setTimeout(() => { alert("Puzzle Selesai! ‚ù§Ô∏è"); nextPage('page4'); }, 1500);
            }
        }

        // --- TYPING & BUTTONS ---
        let i = 0;
        function typeWriter() {
            const target = document.getElementById("typing-box");
            if(target.innerHTML === "") {
                function type() { if(i < textToType.length) { target.innerHTML += textToType.charAt(i); i++; setTimeout(type, 50); } }
                type();
            }
        }
        function pindahTombol() {
            const btn = document.getElementById("btnNo");
            btn.style.position = "fixed"; btn.style.left = Math.random()*(window.innerWidth-100)+"px"; btn.style.top = Math.random()*(window.innerHeight-100)+"px";
        }
        function terimaCinta() { triggerConfetti(); triggerConfetti(); setTimeout(() => nextPage('page7'), 1000); }
        function pelukAku() { alert("ü§ó Peluk Eratt!! ü§ó"); location.reload(); }
        function triggerConfetti() { confetti({ particleCount: 100, spread: 70, origin: { y: 0.6 }, colors: ['#ff8fa3', '#c9184a'] }); }

        // --- TIMER FUNCTION ---
        function startTimer() {
            setInterval(() => {
                const now = new Date();
                const diff = now - startDate;
                const d = Math.floor(diff / (1000*60*60*24));
                const h = Math.floor((diff / (1000*60*60)) % 24);
                const m = Math.floor((diff / (1000*60)) % 60);
                const s = Math.floor((diff / 1000) % 60);
                document.getElementById("timer-display").innerText = `${d} Hari, ${h} Jam, ${m} Menit, ${s} Detik`;
            }, 1000);
        }
    </script>
</body>
</html>
