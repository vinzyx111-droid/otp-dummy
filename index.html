<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>For My Love ğŸ’–</title>

<!-- FONT -->
<link href="https://fonts.googleapis.com/css2?family=Patrick+Hand&display=swap" rel="stylesheet">

<style>
*{box-sizing:border-box}
body{
  margin:0;
  font-family:'Patrick Hand',cursive;
  background:linear-gradient(135deg,#ffe6ee,#ffd1dc);
  min-height:100vh;
  display:flex;
  align-items:center;
  justify-content:center;
}

.hidden{display:none!important}

.center{
  background:#fff;
  width:90%;
  max-width:420px;
  padding:24px;
  border-radius:22px;
  box-shadow:0 20px 40px rgba(0,0,0,.15);
  text-align:center;
  animation:fade .6s ease;
}

h1{margin:10px 0;font-size:28px}
p{color:#555}

button{
  border:none;
  padding:14px 22px;
  border-radius:999px;
  font-size:16px;
  cursor:pointer;
  margin:8px;
}

.primary{background:#ff7fa8;color:#fff}
.outline{background:#fff;border:2px solid #ff7fa8;color:#ff7fa8}

input{
  width:100%;
  padding:14px;
  border-radius:12px;
  border:1px solid #ddd;
  font-size:16px;
  margin:10px 0;
  text-align:center;
}

/* PUZZLE */
.puzzle{
  display:grid;
  grid-template-columns:repeat(3,1fr);
  gap:4px;
  margin-top:14px;
}
.tile{
  aspect-ratio:1/1;
  background-size:300% 300%;
  border-radius:8px;
  cursor:pointer;
}

/* GALERI */
.gallery img{
  width:100%;
  border-radius:18px;
}

/* AUDIO */
#audioBtn{
  position:fixed;
  right:18px;
  bottom:18px;
  width:54px;
  height:54px;
  border-radius:50%;
  background:#ff7fa8;
  color:#fff;
  font-size:24px;
}

@keyframes fade{
  from{opacity:0;transform:translateY(20px)}
  to{opacity:1;transform:none}
}
</style>
</head>

<body>

<!-- AUDIO -->
<audio id="music" loop>
  <source src="lagu-kita.mp3" type="audio/mpeg">
</audio>
<button id="audioBtn" onclick="toggleMusic()">ğŸµ</button>

<!-- PAGE 1 -->
<div class="center" id="start">
  <h1>Hello My Love ğŸ’–</h1>
  <p>Do you want to see your gift?</p>
  <button class="primary" onclick="go('code')">YES PLEASE</button>
  <button class="outline" onclick="alert('Yahh ğŸ˜­ coba lagi dong')">NO THANKS</button>
</div>

<!-- PAGE 2 CODE -->
<div class="center hidden" id="code">
  <h1>ğŸ” Secret Code</h1>
  <p>Clue 6 angka</p>
  <input id="codeInput" placeholder="Tanggal / Bulan / Tahun">
  <button class="primary" onclick="checkCode()">Masuk ğŸ’—</button>
</div>

<!-- PAGE 3 PUZZLE -->
<div class="center hidden" id="puzzle">
  <h1>ğŸ§© Puzzle Time</h1>
  <p>Susun fotonya dulu ya ğŸ˜˜</p>
  <div class="puzzle" id="puzzleGrid"></div>
</div>

<!-- PAGE 4 GALERI -->
<div class="center hidden" id="gallery">
  <h1>I Love You ğŸ’–</h1>
  <p id="countdown"></p>
  <div class="gallery">
    <img id="galleryImg" src="foto1.jpeg">
  </div>
  <p>Geser â†’ untuk lihat foto selanjutnya</p>
</div>

<script>
const pages=document.querySelectorAll('.center');
function go(id){
  pages.forEach(p=>p.classList.add('hidden'));
  document.getElementById(id).classList.remove('hidden');
}

/* MUSIC */
let playing=false;
function toggleMusic(){
  const m=document.getElementById('music');
  if(playing){m.pause()}else{m.play()}
  playing=!playing;
}

/* CODE */
function checkCode(){
  if(codeInput.value==="250825"){
    go('puzzle');
  }else alert("Salah sayang ğŸ˜œ");
}

/* PUZZLE */
const grid=document.getElementById('puzzleGrid');
let order=[...Array(9).keys()].sort(()=>Math.random()-0.5);
function draw(){
  grid.innerHTML='';
  order.forEach((n,i)=>{
    const d=document.createElement('div');
    d.className='tile';
    d.style.backgroundImage="url('foto1.jpeg')";
    d.style.backgroundPosition=`${(n%3)*50}% ${Math.floor(n/3)*50}%`;
    d.onclick=()=>swap(i);
    grid.appendChild(d);
  });
}
function swap(i){
  if(i>0)[order[i],order[i-1]]=[order[i-1],order[i]];
  draw();
  if(order.every((v,i)=>v===i))setTimeout(()=>go('gallery'),400);
}
draw();

/* GALERI SWIPE */
let idx=1;
const img=document.getElementById('galleryImg');
let startX=0;
img.ontouchstart=e=>startX=e.touches[0].clientX;
img.ontouchend=e=>{
  if(e.changedTouches[0].clientX<startX-40){
    idx=idx%9+1;
    img.src=`foto${idx}.jpeg`;
  }
};

/* COUNTDOWN */
const target=new Date(2025,7,25);
const now=new Date();
const days=Math.ceil((target-now)/86400000);
countdown.innerHTML=`ğŸ’ menuju hari jadian kita ğŸ’`;

/* INIT */
window.onload=()=>go('start');
</script>

</body>
</html>
