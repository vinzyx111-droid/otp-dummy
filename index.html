<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1.0">
<title>For My Love ğŸ’–</title>

<link href="https://fonts.googleapis.com/css2?family=Patrick+Hand&family=Poppins:wght@400;600&display=swap" rel="stylesheet">

<style>
*{box-sizing:border-box}
body{
  margin:0;
  font-family:'Poppins',sans-serif;
  overflow-x:hidden;
  background:#000;
}

/* ğŸŒ¸ FLOATING PARALLAX BACKGROUND */
.bg{
  position:fixed;
  inset:0;
  overflow:hidden;
  z-index:-5;
}
.blob{
  position:absolute;
  width:300px;
  height:300px;
  background:radial-gradient(circle,#ffd6e6,#ff9bb8);
  border-radius:50%;
  filter:blur(80px);
  opacity:.7;
  animation:float 40s infinite alternate ease-in-out;
}
.blob.b1{top:10%;left:10%;animation-duration:45s}
.blob.b2{top:60%;left:70%;animation-duration:50s}
.blob.b3{top:30%;left:50%;animation-duration:55s}

@keyframes float{
  from{transform:translateY(-40px) translateX(-30px)}
  to{transform:translateY(40px) translateX(30px)}
}

/* CINEMATIC FADE */
#fade{
  position:fixed;
  inset:0;
  background:#000;
  opacity:0;
  pointer-events:none;
  transition:1.5s;
  z-index:10;
}

/* PAGE */
.page{
  min-height:100vh;
  display:flex;
  align-items:center;
  justify-content:center;
  padding:20px;
}
.card{
  background:#fff;
  width:100%;
  max-width:420px;
  padding:26px;
  border-radius:26px;
  box-shadow:0 20px 40px rgba(0,0,0,.15);
  text-align:center;
  animation:fadeIn .7s ease;
}
.hidden{display:none}
@keyframes fadeIn{
  from{opacity:0;transform:translateY(20px)}
  to{opacity:1}
}

h1,h2{font-family:'Patrick Hand',cursive}
h1{font-size:34px}
button{
  border:none;
  padding:14px 24px;
  border-radius:999px;
  font-size:16px;
  cursor:pointer;
  margin:8px;
}
.primary{background:#ff7aa2;color:#fff}
.outline{background:#fff;border:2px solid #ff7aa2;color:#ff7aa2}
input{
  width:100%;
  padding:14px;
  border-radius:14px;
  border:1px solid #ddd;
  font-size:16px;
  text-align:center;
}

/* ğŸµ MUSIC */
#musicBtn{
  position:fixed;
  right:18px;
  bottom:18px;
  width:56px;
  height:56px;
  border-radius:50%;
  background:#ff7aa2;
  color:#fff;
  font-size:22px;
  z-index:20;
}

/* ğŸ§© PUZZLE â€” SWIPE */
.puzzle{
  display:grid;
  grid-template-columns:repeat(3,1fr);
  gap:6px;
  margin-top:16px;
}
.tile{
  aspect-ratio:1/1;
  background-size:300% 300%;
  border-radius:14px;
  touch-action:none;
}

/* ğŸ‰ CONFETTI */
canvas{
  position:fixed;
  inset:0;
  pointer-events:none;
  z-index:15;
}

/* ğŸ’Œ LETTER */
.type{
  white-space:pre-line;
  font-size:16px;
  line-height:1.7;
}
</style>
</head>

<body>

<!-- BACKGROUND -->
<div class="bg">
  <div class="blob b1"></div>
  <div class="blob b2"></div>
  <div class="blob b3"></div>
</div>

<div id="fade"></div>
<canvas id="confetti"></canvas>

<audio id="bgm" loop>
  <source src="lagu-lagi.mp3" type="audio/mpeg">
</audio>
<button id="musicBtn" onclick="toggleMusic()">ğŸµ</button>

<!-- PAGE 1 -->
<div class="page" id="start">
  <div class="card">
    <h1>Hello My Love ğŸ’–</h1>
    <p>Do you want to see your gift?</p>
    <button class="primary" onclick="go('code')">YES PLEASE</button>
    <button class="outline" onclick="alert('Coba YES dulu ya ğŸ¥º')">NO THANKS</button>
  </div>
</div>

<!-- CODE -->
<div class="page hidden" id="code">
  <div class="card">
    <h2>ğŸ” Secret Code</h2>
    <p>Clue 6 angka</p>
    <input id="pass" placeholder="tanggal / bulan / tahun">
    <button class="primary" onclick="checkCode()">Masuk ğŸ’—</button>
  </div>
</div>

<!-- PUZZLE -->
<div class="page hidden" id="puzzlePage">
  <div class="card">
    <h2>ğŸ§© Puzzle Time</h2>
    <p>Geser potongan fotonya ğŸ’‹</p>
    <div class="puzzle" id="puzzle"></div>
  </div>
</div>

<!-- LOVE -->
<div class="page hidden" id="love">
  <div class="card">
    <h2>I Love You ğŸ’–</h2>
    <p id="count"></p>
    <img src="p5.jpg" style="width:100%;border-radius:16px">
    <button class="primary" onclick="go('yes')">Will you stay with me?</button>
  </div>
</div>

<!-- YES -->
<div class="page hidden" id="yes">
  <div class="card">
    <h2>ğŸ’– She Said YES!</h2>
    <button class="primary" onclick="ending()">Peluk Aku ğŸ¤</button>
  </div>
</div>

<script>
/* NAV */
function go(id){
  document.querySelectorAll('.page').forEach(p=>p.classList.add('hidden'));
  document.getElementById(id).classList.remove('hidden');
}

/* MUSIC */
const bgm=document.getElementById('bgm');
function toggleMusic(){ bgm.paused?bgm.play():bgm.pause(); }

/* PASSWORD */
function checkCode(){
  if(pass.value==="250825"){
    bgm.volume=0.9; bgm.play();
    go('puzzlePage');
    initPuzzle();
  }else alert('Salah ğŸ˜œ');
}

/* PUZZLE SWIPE */
const puzzle=document.getElementById('puzzle');
let order=[...Array(9).keys()].sort(()=>Math.random()-0.5);
let active=null;

function initPuzzle(){
  puzzle.innerHTML='';
  order.forEach(i=>{
    const t=document.createElement('div');
    t.className='tile';
    t.dataset.id=i;
    t.style.backgroundImage=`url(p${i+1}.jpg)`;
    t.addEventListener('touchstart',()=>active=t);
    t.addEventListener('touchend',e=>{
      const target=document.elementFromPoint(
        e.changedTouches[0].clientX,
        e.changedTouches[0].clientY
      );
      if(target && target.classList.contains('tile') && target!==active){
        swap(active,target);
      }
      active=null;
    });
    puzzle.appendChild(t);
  });
}

function swap(a,b){
  [a.style.backgroundImage,b.style.backgroundImage]=
  [b.style.backgroundImage,a.style.backgroundImage];
  [a.dataset.id,b.dataset.id]=[b.dataset.id,a.dataset.id];
  checkPuzzle();
}

function checkPuzzle(){
  const ok=[...puzzle.children].every((t,i)=>+t.dataset.id===i);
  if(ok){
    startConfetti();
    setTimeout(()=>go('love'),800);
  }
}

/* COUNTDOWN */
const d=new Date(2025,7,25);
count.innerText=`ğŸ’ ${Math.floor((d-new Date())/86400000)} hari menuju hari jadian kita ğŸ’`;

/* ENDING */
function ending(){
  fade.style.opacity=.6;
  let v=bgm.volume;
  const f=setInterval(()=>{
    v-=.05; bgm.volume=Math.max(0,v);
    if(v<=0){ clearInterval(f); bgm.pause(); }
  },120);
  setTimeout(showLetter,1500);
}

/* LETTER */
function showLetter(){
  document.querySelectorAll('.page').forEach(p=>p.remove());
  const box=document.createElement('div');
  box.className='page';
  box.innerHTML=`
    <div class="card">
      <h2>ğŸ’Œ My Promise</h2>
      <p class="type" id="t"></p>
    </div>`;
  document.body.appendChild(box);

  const text=`Terima kasih sudah memilihku.
Aku akan memilihmu,
hari ini,
besok,
dan seterusnya ğŸ¤`;
  let i=0;
  const t=document.getElementById('t');
  const typing=setInterval(()=>{
    t.innerHTML+=text[i++];
    if(i>=text.length) clearInterval(typing);
  },45);
}

/* CONFETTI */
const c=document.getElementById('confetti'),ctx=c.getContext('2d');
let conf=[];
function startConfetti(){
  c.width=innerWidth;c.height=innerHeight;
  for(let i=0;i<120;i++) conf.push({x:Math.random()*c.width,y:-20,r:6,s:2+Math.random()*3});
  requestAnimationFrame(draw);
}
function draw(){
  ctx.clearRect(0,0,c.width,c.height);
  conf.forEach(p=>{
    ctx.fillStyle=`hsl(${Math.random()*360},80%,60%)`;
    ctx.beginPath();ctx.arc(p.x,p.y,p.r,0,Math.PI*2);ctx.fill();
    p.y+=p.s;
  });
  conf=conf.filter(p=>p.y<c.height+20);
  if(conf.length) requestAnimationFrame(draw);
}
</script>
</body>
</html>
